offset:function(a) {
  if (a) {
    return __ITERATE__(<@ this.e @>, <@ function(c, f) {
      var b, d, h, e = $(c), l = e.css("position"), k = {};
      "static" === l && (c.style.position = "relative");
      h = e.offset();
      d = e.css("top");
      b = e.css("left");
      "absolute" !== l && "fixed" !== l || "auto" != d && "auto" != b ? (d = parseFloat(d) || 0, b = parseFloat(b) || 0) : (b = e.position(), d = b.top, b = b.left);
      __IS_FUNCTION__(<@ a @>) && (a = a.call(g, f, h));
      null != a.top && (k.top = a.top - h.top + d);
      null != a.left && (k.left = a.left - h.left + b);
      "using" in a ? a.using.call(g, k) : e.css(k);
    } @>), this;
  }
  if (this.e[0].compareDocumentPosition(this.e[0].ownerDocument.documentElement) & 8) {
    var m = this.e[0].getBoundingClientRect(), g = this.e[0], c = g && g.ownerDocument, f = c.documentElement, c = c.defaultView || g.parentWindow;
    return {top:m.top + (c.pageYOffset || f.scrollTop) - (f.clientTop || 0), left:m.left + (c.pageXOffset || f.scrollLeft) - (f.clientLeft || 0)};
  }
  return {top:0, left:0};
}
